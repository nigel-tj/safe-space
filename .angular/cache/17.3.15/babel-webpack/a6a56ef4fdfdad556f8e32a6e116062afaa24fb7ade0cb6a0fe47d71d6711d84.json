{"ast":null,"code":"import _asyncToGenerator from \"/home/nigel/work/safe-space/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { inject } from '@angular/core';\nimport { MenuController, Platform, ToastController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { Storage } from '@ionic/storage-angular';\nimport { SwUpdate } from '@angular/service-worker';\nimport { UserData } from './providers/user-data';\nimport { environment } from '../environments/environment';\nimport { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nfunction AppComponent_ion_menu_toggle_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-menu-toggle\", 8)(1, \"ion-item\", 12);\n    i0.ɵɵelement(2, \"ion-icon\", 13);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r1 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", p_r1.url);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"name\", p_r1.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.title);\n  }\n}\nfunction AppComponent_ion_list_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\", 2)(1, \"ion-list-header\")(2, \"ion-label\");\n    i0.ɵɵtext(3, \"Account\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-menu-toggle\", 8)(5, \"ion-item\", 14);\n    i0.ɵɵelement(6, \"ion-icon\", 15);\n    i0.ɵɵelementStart(7, \"ion-label\");\n    i0.ɵɵtext(8, \"Account\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ion-menu-toggle\", 8)(10, \"ion-item\", 16);\n    i0.ɵɵelement(11, \"ion-icon\", 17);\n    i0.ɵɵelementStart(12, \"ion-label\");\n    i0.ɵɵtext(13, \"Support\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"ion-menu-toggle\", 8)(15, \"ion-item\", 9);\n    i0.ɵɵlistener(\"click\", function AppComponent_ion_list_12_Template_ion_item_click_15_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.logout());\n    });\n    i0.ɵɵelement(16, \"ion-icon\", 18);\n    i0.ɵɵelementStart(17, \"ion-label\");\n    i0.ɵɵtext(18, \"Logout\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction AppComponent_ion_list_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\", 2)(1, \"ion-list-header\")(2, \"ion-label\");\n    i0.ɵɵtext(3, \"Account\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-menu-toggle\", 8)(5, \"ion-item\", 19);\n    i0.ɵɵelement(6, \"ion-icon\", 20);\n    i0.ɵɵelementStart(7, \"ion-label\");\n    i0.ɵɵtext(8, \"Login\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ion-menu-toggle\", 8)(10, \"ion-item\", 16);\n    i0.ɵɵelement(11, \"ion-icon\", 17);\n    i0.ɵɵelementStart(12, \"ion-label\");\n    i0.ɵɵtext(13, \"Support\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"ion-menu-toggle\", 8)(15, \"ion-item\", 21);\n    i0.ɵɵelement(16, \"ion-icon\", 22);\n    i0.ɵɵelementStart(17, \"ion-label\");\n    i0.ɵɵtext(18, \"Signup\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"ion-item\");\n    i0.ɵɵelement(20, \"ion-icon\", 23);\n    i0.ɵɵelementStart(21, \"ion-label\");\n    i0.ɵɵtext(22, \"Dark Mode\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ion-toggle\", 24);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function AppComponent_ion_list_13_Template_ion_toggle_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.dark, $event) || (ctx_r2.dark = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(23);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.dark);\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    menu = (() => inject(MenuController))();\n    platform = (() => inject(Platform))();\n    router = (() => inject(Router))();\n    storage = (() => inject(Storage))();\n    userData = (() => inject(UserData))();\n    swUpdate = (() => inject(SwUpdate))();\n    toastCtrl = (() => inject(ToastController))();\n    appPages = [{\n      title: 'News Feed',\n      url: '/app/tabs/news-feed',\n      icon: 'list'\n    }, {\n      title: 'Social Workers',\n      url: '/app/tabs/social-workers',\n      icon: 'people'\n    }, {\n      title: 'Chat Rooms',\n      url: '/app/tabs/chatrooms',\n      icon: 'chatbubbles'\n    }, {\n      title: 'Report',\n      url: '/app/tabs/reports',\n      icon: 'megaphone'\n    }, {\n      title: 'Help Centers',\n      url: '/app/tabs/map',\n      icon: 'map'\n    }, {\n      title: 'About',\n      url: '/app/tabs/about',\n      icon: 'information-circle'\n    }];\n    loggedIn = false;\n    dark = false;\n    appName = (() => environment.appName)();\n    version = (() => environment.version)();\n    constructor() {\n      this.initializeApp();\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        yield _this.storage.create();\n        _this.checkLoginStatus();\n        _this.listenForLoginEvents();\n        _this.setupServiceWorker();\n      })();\n    }\n    setupServiceWorker() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.swUpdate.isEnabled) {\n          _this2.swUpdate.versionUpdates.subscribe(event => {\n            if (event.type === 'VERSION_READY') {\n              _this2.promptUserUpdate();\n            }\n          });\n        }\n      })();\n    }\n    promptUserUpdate() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const toast = yield _this3.toastCtrl.create({\n          message: 'Update available!',\n          position: 'bottom',\n          buttons: [{\n            role: 'cancel',\n            text: 'Reload'\n          }]\n        });\n        yield toast.present();\n        toast.onDidDismiss().then(() => _this3.swUpdate.activateUpdate()).then(() => window.location.reload());\n      })();\n    }\n    initializeApp() {\n      this.platform.ready().then(() => {\n        if (this.platform.is('hybrid')) {\n          this.setupStatusBar();\n        }\n      });\n    }\n    setupStatusBar() {\n      const statusBar = document.querySelector('ion-status-bar');\n      if (statusBar) {\n        statusBar.style.backgroundColor = this.dark ? '#000000' : '#ffffff';\n      }\n    }\n    checkLoginStatus() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const loggedIn = yield _this4.userData.isLoggedIn();\n        _this4.updateLoggedInStatus(loggedIn);\n      })();\n    }\n    updateLoggedInStatus(loggedIn) {\n      this.loggedIn = loggedIn;\n    }\n    listenForLoginEvents() {\n      window.addEventListener('user:login', () => this.updateLoggedInStatus(true));\n      window.addEventListener('user:signup', () => this.updateLoggedInStatus(true));\n      window.addEventListener('user:logout', () => this.updateLoggedInStatus(false));\n    }\n    logout() {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        yield _this5.userData.logout();\n        yield _this5.router.navigateByUrl('/app/tabs/schedule');\n      })();\n    }\n    openTutorial() {\n      var _this6 = this;\n      return _asyncToGenerator(function* () {\n        _this6.menu.enable(false);\n        yield _this6.storage.set('ion_did_tutorial', false);\n        yield _this6.router.navigateByUrl('/tutorial');\n      })();\n    }\n    static ɵfac = function AppComponent_Factory(t) {\n      return new (t || AppComponent)();\n    };\n    static ɵcmp = (() => /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AppComponent,\n      selectors: [[\"app-root\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 24,\n      vars: 7,\n      consts: [[\"contentId\", \"main-content\"], [\"contentId\", \"main-content\", \"type\", \"overlay\"], [\"lines\", \"none\"], [1, \"ion-text-center\"], [\"color\", \"dark\"], [\"color\", \"primary\"], [\"autoHide\", \"false\", 4, \"ngFor\", \"ngForOf\"], [\"lines\", \"none\", 4, \"ngIf\"], [\"autoHide\", \"false\"], [\"button\", \"\", \"detail\", \"false\", 3, \"click\"], [\"slot\", \"start\", \"name\", \"home\", \"color\", \"primary\"], [\"id\", \"main-content\"], [\"routerLinkActive\", \"selected\", \"routerDirection\", \"root\", \"detail\", \"false\", 3, \"routerLink\"], [\"slot\", \"start\", \"color\", \"primary\", 3, \"name\"], [\"routerLink\", \"/account\", \"routerLinkActive\", \"active\", \"routerDirection\", \"root\", \"detail\", \"false\"], [\"slot\", \"start\", \"name\", \"person\", \"color\", \"primary\"], [\"routerLink\", \"/support\", \"routerLinkActive\", \"active\", \"routerDirection\", \"root\", \"detail\", \"false\"], [\"slot\", \"start\", \"name\", \"help-circle\", \"color\", \"primary\"], [\"slot\", \"start\", \"name\", \"log-out\", \"color\", \"primary\"], [\"routerLink\", \"/login\", \"routerLinkActive\", \"active\", \"routerDirection\", \"root\", \"detail\", \"false\"], [\"slot\", \"start\", \"name\", \"log-in\", \"color\", \"primary\"], [\"routerLink\", \"/signup\", \"routerLinkActive\", \"active\", \"routerDirection\", \"root\", \"detail\", \"false\"], [\"slot\", \"start\", \"name\", \"person-add\", \"color\", \"primary\"], [\"slot\", \"start\", \"name\", \"moon\", \"color\", \"primary\"], [\"color\", \"primary\", 3, \"ngModelChange\", \"ngModel\"]],\n      template: function AppComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-app\")(1, \"ion-split-pane\", 0)(2, \"ion-menu\", 1)(3, \"ion-content\")(4, \"ion-list\", 2)(5, \"ion-list-header\")(6, \"ion-label\", 3)(7, \"ion-text\", 4);\n          i0.ɵɵtext(8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"ion-text\", 5);\n          i0.ɵɵtext(10);\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(11, AppComponent_ion_menu_toggle_11_Template, 5, 3, \"ion-menu-toggle\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(12, AppComponent_ion_list_12_Template, 19, 0, \"ion-list\", 7)(13, AppComponent_ion_list_13_Template, 24, 1, \"ion-list\", 7);\n          i0.ɵɵelementStart(14, \"ion-list\", 2)(15, \"ion-list-header\")(16, \"ion-label\");\n          i0.ɵɵtext(17, \"Welcome\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"ion-menu-toggle\", 8)(19, \"ion-item\", 9);\n          i0.ɵɵlistener(\"click\", function AppComponent_Template_ion_item_click_19_listener() {\n            return ctx.openTutorial();\n          });\n          i0.ɵɵelement(20, \"ion-icon\", 10);\n          i0.ɵɵelementStart(21, \"ion-label\");\n          i0.ɵɵtext(22, \"Welcome Slides\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelement(23, \"ion-router-outlet\", 11);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵclassProp(\"dark-theme\", ctx.dark);\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate(ctx.appName);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" v\", ctx.version, \"\");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.appPages);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.loggedIn);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.loggedIn);\n        }\n      },\n      dependencies: [IonicModule, i1.IonApp, i1.IonContent, i1.IonIcon, i1.IonItem, i1.IonLabel, i1.IonList, i1.IonListHeader, i1.IonMenu, i1.IonMenuToggle, i1.IonSplitPane, i1.IonText, i1.IonToggle, i1.BooleanValueAccessor, i1.IonRouterOutlet, i1.RouterLinkDelegate, RouterModule, i2.RouterLink, i2.RouterLinkActive, FormsModule, i3.NgControlStatus, i3.NgModel],\n      styles: [\":host{--ion-background-color: var(--ion-color-light);--ion-text-color: var(--ion-color-dark)}ion-menu{--width: 304px;--min-width: 304px}ion-menu ion-content{--background: var(--ion-color-light)}ion-menu ion-list{background:transparent}ion-menu ion-list-header{padding-top:28px;padding-bottom:8px}ion-menu ion-item{--padding-start: 16px;--padding-end: 16px;--min-height: 50px;--background: transparent;--background-hover: var(--ion-color-light-shade);--background-activated: var(--ion-color-light-shade);--background-focused: var(--ion-color-light-shade)}ion-menu ion-item.selected{--background: var(--ion-color-light-shade)}ion-menu ion-icon{color:var(--ion-color-primary)}ion-menu ion-label{font-weight:500}.dark-theme{--ion-background-color: var(--ion-color-dark);--ion-text-color: var(--ion-color-light)}.dark-theme ion-menu ion-content{--background: var(--ion-color-dark)}.dark-theme ion-menu ion-item{--background-hover: var(--ion-color-dark-shade);--background-activated: var(--ion-color-dark-shade);--background-focused: var(--ion-color-dark-shade)}.dark-theme ion-menu ion-item.selected{--background: var(--ion-color-dark-shade)}ion-menu ion-item{--transition: none}ion-item.selected{--color: var(--ion-color-primary)}ion-menu.md ion-list{padding:20px 0}ion-menu.md ion-list-header{padding-left:18px;padding-right:18px;text-transform:uppercase;letter-spacing:.1em;font-weight:450}ion-menu.md ion-item{--padding-start: 18px;margin-right:10px;border-radius:0 50px 50px 0;font-weight:500}ion-menu.md ion-item.selected{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md ion-item.selected ion-icon{color:var(--ion-color-primary)}ion-menu.md ion-list-header,ion-menu.md ion-item ion-icon{color:var(--ion-color-step-650, #5f6368)}ion-menu.md ion-list:not(:last-of-type){border-bottom:1px solid var(--ion-color-step-150, #d7d8da)}ion-menu.ios ion-list-header{padding-left:16px;padding-right:16px;margin-bottom:8px}ion-menu.ios ion-list{padding:20px 0 0}ion-menu.ios ion-item{--padding-start: 16px;--min-height: 50px}ion-menu.ios ion-item ion-icon{font-size:24px;color:#73849a}ion-menu.ios ion-item.selected ion-icon{color:var(--ion-color-primary)}\\n\"],\n      encapsulation: 2\n    }))();\n  }\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}