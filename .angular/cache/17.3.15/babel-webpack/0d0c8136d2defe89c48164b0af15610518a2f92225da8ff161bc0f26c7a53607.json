{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/storage-angular\";\nexport class UserData {\n  storage;\n  favorites = [];\n  HAS_LOGGED_IN = 'hasLoggedIn';\n  HAS_SEEN_TUTORIAL = 'hasSeenTutorial';\n  constructor(storage) {\n    this.storage = storage;\n  }\n  hasFavorite(sessionName) {\n    return this.favorites.indexOf(sessionName) > -1;\n  }\n  addFavorite(sessionName) {\n    this.favorites.push(sessionName);\n  }\n  removeFavorite(sessionName) {\n    const index = this.favorites.indexOf(sessionName);\n    if (index > -1) {\n      this.favorites.splice(index, 1);\n    }\n  }\n  login(username) {\n    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {\n      this.setUsername(username);\n      return window.dispatchEvent(new CustomEvent('user:login'));\n    });\n  }\n  signup(username) {\n    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {\n      this.setUsername(username);\n      return window.dispatchEvent(new CustomEvent('user:signup'));\n    });\n  }\n  logout() {\n    return this.storage.remove(this.HAS_LOGGED_IN).then(() => {\n      return this.storage.remove('username');\n    }).then(() => {\n      window.dispatchEvent(new CustomEvent('user:logout'));\n    });\n  }\n  setUsername(username) {\n    return this.storage.set('username', username);\n  }\n  getUsername() {\n    return this.storage.get('username').then(value => {\n      return value;\n    });\n  }\n  isLoggedIn() {\n    return this.storage.get(this.HAS_LOGGED_IN).then(value => {\n      return value === true;\n    });\n  }\n  checkHasSeenTutorial() {\n    return this.storage.get(this.HAS_SEEN_TUTORIAL).then(value => {\n      return value;\n    });\n  }\n  static ɵfac = function UserData_Factory(t) {\n    return new (t || UserData)(i0.ɵɵinject(i1.Storage));\n  };\n  static ɵprov = (() => /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserData,\n    factory: UserData.ɵfac,\n    providedIn: 'root'\n  }))();\n}","map":{"version":3,"names":["UserData","storage","favorites","HAS_LOGGED_IN","HAS_SEEN_TUTORIAL","constructor","hasFavorite","sessionName","indexOf","addFavorite","push","removeFavorite","index","splice","login","username","set","then","setUsername","window","dispatchEvent","CustomEvent","signup","logout","remove","getUsername","get","value","isLoggedIn","checkHasSeenTutorial","i0","ɵɵinject","i1","Storage","factory","ɵfac","providedIn"],"sources":["/home/nigel/work/safe-space/src/app/providers/user-data.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Storage } from '@ionic/storage-angular';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserData {\n  favorites: string[] = [];\n  HAS_LOGGED_IN = 'hasLoggedIn';\n  HAS_SEEN_TUTORIAL = 'hasSeenTutorial';\n\n  constructor(\n    public storage: Storage\n  ) { }\n\n  hasFavorite(sessionName: string): boolean {\n    return (this.favorites.indexOf(sessionName) > -1);\n  }\n\n  addFavorite(sessionName: string): void {\n    this.favorites.push(sessionName);\n  }\n\n  removeFavorite(sessionName: string): void {\n    const index = this.favorites.indexOf(sessionName);\n    if (index > -1) {\n      this.favorites.splice(index, 1);\n    }\n  }\n\n  login(username: string): Promise<any> {\n    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {\n      this.setUsername(username);\n      return window.dispatchEvent(new CustomEvent('user:login'));\n    });\n  }\n\n  signup(username: string): Promise<any> {\n    return this.storage.set(this.HAS_LOGGED_IN, true).then(() => {\n      this.setUsername(username);\n      return window.dispatchEvent(new CustomEvent('user:signup'));\n    });\n  }\n\n  logout(): Promise<any> {\n    return this.storage.remove(this.HAS_LOGGED_IN).then(() => {\n      return this.storage.remove('username');\n    }).then(() => {\n      window.dispatchEvent(new CustomEvent('user:logout'));\n    });\n  }\n\n  setUsername(username: string): Promise<any> {\n    return this.storage.set('username', username);\n  }\n\n  getUsername(): Promise<string> {\n    return this.storage.get('username').then((value) => {\n      return value;\n    });\n  }\n\n  isLoggedIn(): Promise<boolean> {\n    return this.storage.get(this.HAS_LOGGED_IN).then((value) => {\n      return value === true;\n    });\n  }\n\n  checkHasSeenTutorial(): Promise<string> {\n    return this.storage.get(this.HAS_SEEN_TUTORIAL).then((value) => {\n      return value;\n    });\n  }\n}\n"],"mappings":";;AAMA,OAAM,MAAOA,QAAQ;EAMVC,OAAA;EALTC,SAAS,GAAa,EAAE;EACxBC,aAAa,GAAG,aAAa;EAC7BC,iBAAiB,GAAG,iBAAiB;EAErCC,YACSJ,OAAgB;IAAhB,KAAAA,OAAO,GAAPA,OAAO;EACZ;EAEJK,WAAWA,CAACC,WAAmB;IAC7B,OAAQ,IAAI,CAACL,SAAS,CAACM,OAAO,CAACD,WAAW,CAAC,GAAG,CAAC,CAAC;EAClD;EAEAE,WAAWA,CAACF,WAAmB;IAC7B,IAAI,CAACL,SAAS,CAACQ,IAAI,CAACH,WAAW,CAAC;EAClC;EAEAI,cAAcA,CAACJ,WAAmB;IAChC,MAAMK,KAAK,GAAG,IAAI,CAACV,SAAS,CAACM,OAAO,CAACD,WAAW,CAAC;IACjD,IAAIK,KAAK,GAAG,CAAC,CAAC,EAAE;MACd,IAAI,CAACV,SAAS,CAACW,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IACjC;EACF;EAEAE,KAAKA,CAACC,QAAgB;IACpB,OAAO,IAAI,CAACd,OAAO,CAACe,GAAG,CAAC,IAAI,CAACb,aAAa,EAAE,IAAI,CAAC,CAACc,IAAI,CAAC,MAAK;MAC1D,IAAI,CAACC,WAAW,CAACH,QAAQ,CAAC;MAC1B,OAAOI,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,YAAY,CAAC,CAAC;IAC5D,CAAC,CAAC;EACJ;EAEAC,MAAMA,CAACP,QAAgB;IACrB,OAAO,IAAI,CAACd,OAAO,CAACe,GAAG,CAAC,IAAI,CAACb,aAAa,EAAE,IAAI,CAAC,CAACc,IAAI,CAAC,MAAK;MAC1D,IAAI,CAACC,WAAW,CAACH,QAAQ,CAAC;MAC1B,OAAOI,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,aAAa,CAAC,CAAC;IAC7D,CAAC,CAAC;EACJ;EAEAE,MAAMA,CAAA;IACJ,OAAO,IAAI,CAACtB,OAAO,CAACuB,MAAM,CAAC,IAAI,CAACrB,aAAa,CAAC,CAACc,IAAI,CAAC,MAAK;MACvD,OAAO,IAAI,CAAChB,OAAO,CAACuB,MAAM,CAAC,UAAU,CAAC;IACxC,CAAC,CAAC,CAACP,IAAI,CAAC,MAAK;MACXE,MAAM,CAACC,aAAa,CAAC,IAAIC,WAAW,CAAC,aAAa,CAAC,CAAC;IACtD,CAAC,CAAC;EACJ;EAEAH,WAAWA,CAACH,QAAgB;IAC1B,OAAO,IAAI,CAACd,OAAO,CAACe,GAAG,CAAC,UAAU,EAAED,QAAQ,CAAC;EAC/C;EAEAU,WAAWA,CAAA;IACT,OAAO,IAAI,CAACxB,OAAO,CAACyB,GAAG,CAAC,UAAU,CAAC,CAACT,IAAI,CAAEU,KAAK,IAAI;MACjD,OAAOA,KAAK;IACd,CAAC,CAAC;EACJ;EAEAC,UAAUA,CAAA;IACR,OAAO,IAAI,CAAC3B,OAAO,CAACyB,GAAG,CAAC,IAAI,CAACvB,aAAa,CAAC,CAACc,IAAI,CAAEU,KAAK,IAAI;MACzD,OAAOA,KAAK,KAAK,IAAI;IACvB,CAAC,CAAC;EACJ;EAEAE,oBAAoBA,CAAA;IAClB,OAAO,IAAI,CAAC5B,OAAO,CAACyB,GAAG,CAAC,IAAI,CAACtB,iBAAiB,CAAC,CAACa,IAAI,CAAEU,KAAK,IAAI;MAC7D,OAAOA,KAAK;IACd,CAAC,CAAC;EACJ;;qBAlEW3B,QAAQ,EAAA8B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,OAAA;EAAA;;WAARjC,QAAQ;IAAAkC,OAAA,EAARlC,QAAQ,CAAAmC,IAAA;IAAAC,UAAA,EAFP;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}